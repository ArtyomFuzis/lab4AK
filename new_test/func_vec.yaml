code: |
  .section data

  .org 0x22
  arr1: .word 12 45 89 123
  arr2: .word -12 68468 9 -124
  arr3: .word -123 0 -1 4856
  res:      .word 0 0 0 0
  pointer:  .word res
  read_cnt: .word 0
  save:     .word 0
  rr:       .word 0

  .section text

  #define cmp_step
      ld_ind  pointer
      sub     1
      jnzr    11

      ld_a    rr
      inc
      st      rr

      ld_a    pointer
      inc4
      st      pointer
  #enddefine

  start:    ; func: (a+b)*c == 0
      vld1    arr1
      vld2    arr2
      vadd12
      vmv31
      vld2    arr3
      vmul12
      vcmp3
      vst3    res

      cmp_step
      cmp_step
      cmp_step
      cmp_step

      ld_a    rr
      st      0x21
      halt

  .section int
      ret
  

config: |
  {
    "mem_size": 2048,
    "tick_cnt": 500,
    "report": "({tick}): ac: {ac} ar: {ar} pc: {pc} cr: {cr} cv: {cv}",
    "res": "dec",
    "assert": "2 "
  }

assert_cmem: |
  10: opcode: f0 arg: 00000022 -- vld1 34
  15: opcode: f1 arg: 00000032 -- vld2 50
  20: opcode: d0 -- vadd12
  21: opcode: c1 -- vmv31
  22: opcode: f1 arg: 00000042 -- vld2 66
  27: opcode: d2 -- vmul12
  28: opcode: ca -- vcmp3
  29: opcode: f5 arg: 00000052 -- vst3 82
  34: opcode: 6c arg: 00000062 -- ld_ind 98
  39: opcode: 42 arg: 00000001 -- sub 1
  44: opcode: 81 arg: 000b -- jnzr 11
  47: opcode: 60 arg: 0000006e -- ld_a 110
  52: opcode: 01 -- inc
  53: opcode: 6b arg: 0000006e -- st 110
  58: opcode: 60 arg: 00000062 -- ld_a 98
  63: opcode: 03 -- inc4
  64: opcode: 6b arg: 00000062 -- st 98
  69: opcode: 6c arg: 00000062 -- ld_ind 98
  74: opcode: 42 arg: 00000001 -- sub 1
  79: opcode: 81 arg: 000b -- jnzr 11
  82: opcode: 60 arg: 0000006e -- ld_a 110
  87: opcode: 01 -- inc
  88: opcode: 6b arg: 0000006e -- st 110
  93: opcode: 60 arg: 00000062 -- ld_a 98
  98: opcode: 03 -- inc4
  99: opcode: 6b arg: 00000062 -- st 98
  104: opcode: 6c arg: 00000062 -- ld_ind 98
  109: opcode: 42 arg: 00000001 -- sub 1
  114: opcode: 81 arg: 000b -- jnzr 11
  117: opcode: 60 arg: 0000006e -- ld_a 110
  122: opcode: 01 -- inc
  123: opcode: 6b arg: 0000006e -- st 110
  128: opcode: 60 arg: 00000062 -- ld_a 98
  133: opcode: 03 -- inc4
  134: opcode: 6b arg: 00000062 -- st 98
  139: opcode: 6c arg: 00000062 -- ld_ind 98
  144: opcode: 42 arg: 00000001 -- sub 1
  149: opcode: 81 arg: 000b -- jnzr 11
  152: opcode: 60 arg: 0000006e -- ld_a 110
  157: opcode: 01 -- inc
  158: opcode: 6b arg: 0000006e -- st 110
  163: opcode: 60 arg: 00000062 -- ld_a 98
  168: opcode: 03 -- inc4
  169: opcode: 6b arg: 00000062 -- st 98
  174: opcode: 60 arg: 0000006e -- ld_a 110
  179: opcode: 6b arg: 00000021 -- st 33
  184: opcode: 07 -- halt
  185: opcode: 08 -- ret



assert_mem: |
  34: data: 0000000c
  38: data: 0000002d
  42: data: 00000059
  46: data: 0000007b
  50: data: fffffff4
  54: data: 00010b74
  58: data: 00000009
  62: data: ffffff84
  66: data: ffffff85
  70: data: 00000000
  74: data: ffffffff
  78: data: 000012f8
  82: data: 00000000
  86: data: 00000000
  90: data: 00000000
  94: data: 00000000
  98: data: 00000052
  102: data: 00000000
  106: data: 00000000
  110: data: 00000000


assert_report: |
  (1): ac: 00000000 ar: 00000000 pc: 00000000 cr: 0000000000 cv: 00000000
  (2): ac: 00000000 ar: 00000000 pc: 00000005 cr: 4b0000000a cv: 00000000
  (3): ac: 00000000 ar: 00000000 pc: 0000000a cr: 4b0000000a cv: 00000000
  (4): ac: 00000000 ar: 00000000 pc: 0000000a cr: 4b0000000a cv: 00000000
  (5): ac: 00000000 ar: 00000000 pc: 0000000f cr: f000000022 cv: 00000080
  (6): ac: 00000000 ar: 00000000 pc: 0000000f cr: f000000022 cv: 00000080
  (7): ac: 00000000 ar: 00000000 pc: 0000000f cr: f000000022 cv: 00000080
  (8): ac: 00000000 ar: 00000000 pc: 0000000f cr: f100000032 cv: 00008000
  (9): ac: 00000000 ar: 00000000 pc: 0000000f cr: f100000032 cv: 00008000
  (10): ac: 00000000 ar: 00000000 pc: 0000000f cr: f100000032 cv: 00008000
  (11): ac: 00000000 ar: 00000000 pc: 0000000f cr: f100000032 cv: 00800000
  (12): ac: 00000000 ar: 00000000 pc: 0000000f cr: f100000032 cv: 00800000
  (13): ac: 00000000 ar: 00000000 pc: 0000000f cr: f100000032 cv: 00800000
  (14): ac: 00000000 ar: 00000000 pc: 0000000f cr: f100000032 cv: 80000000
  (15): ac: 00000000 ar: 00000000 pc: 0000000f cr: f100000032 cv: 80000000
  (16): ac: 00000000 ar: 00000000 pc: 0000000f cr: f100000032 cv: 80000000
  (17): ac: 00000000 ar: 00000000 pc: 00000014 cr: f100000032 cv: 00000081
  (18): ac: 00000000 ar: 00000000 pc: 00000014 cr: f100000032 cv: 00000081
  (19): ac: 00000000 ar: 00000000 pc: 00000014 cr: f100000032 cv: 00000081
  (20): ac: 00000000 ar: 00000000 pc: 00000015 cr: d0c1f10000 cv: 00008110
  (21): ac: 00000000 ar: 00000000 pc: 00000015 cr: d0c1f10000 cv: 00008110
  (22): ac: 00000000 ar: 00000000 pc: 00000015 cr: d0c1f10000 cv: 00008110
  (23): ac: 00000000 ar: 00000000 pc: 00000016 cr: c1f1000000 cv: 00811001
  (24): ac: 00000000 ar: 00000000 pc: 00000016 cr: c1f1000000 cv: 00811001
  (25): ac: 00000000 ar: 00000000 pc: 00000016 cr: c1f1000000 cv: 00811001
  (26): ac: 00000000 ar: 00000000 pc: 00000016 cr: f100000042 cv: 81100100
  (27): ac: 00000000 ar: 00000000 pc: 00000016 cr: f100000042 cv: 81100100
  (28): ac: 00000000 ar: 00000000 pc: 00000016 cr: f100000042 cv: 81100100
  (29): ac: 00000000 ar: 00000000 pc: 0000001b cr: f100000042 cv: 10010081
  (30): ac: 00000000 ar: 00000000 pc: 0000001b cr: f100000042 cv: 10010081
  (31): ac: 00000000 ar: 00000000 pc: 0000001b cr: f100000042 cv: 10010081
  (32): ac: 00000000 ar: 00000000 pc: 0000001c cr: d2caf50000 cv: 01008112
  (33): ac: 00000000 ar: 00000000 pc: 0000001c cr: d2caf50000 cv: 01008112
  (34): ac: 00000000 ar: 00000000 pc: 0000001c cr: d2caf50000 cv: 01008112
  (35): ac: 00000000 ar: 00000000 pc: 0000001d cr: caf5000000 cv: 0081120a
  (36): ac: 00000000 ar: 00000000 pc: 0000001d cr: caf5000000 cv: 0081120a
  (37): ac: 00000000 ar: 00000000 pc: 0000001d cr: caf5000000 cv: 0081120a
  (38): ac: 00000000 ar: 00000000 pc: 0000001d cr: f500000052 cv: 81120a00
  (39): ac: 00000000 ar: 00000000 pc: 0000001d cr: f500000052 cv: 81120a00
  (40): ac: 00000000 ar: 00000000 pc: 0000001d cr: f500000052 cv: 81120a00
  (41): ac: 00000000 ar: 00000000 pc: 00000022 cr: f500000052 cv: 120a0085
  (42): ac: 00000000 ar: 00000000 pc: 00000022 cr: f500000052 cv: 120a0085
  (43): ac: 00000000 ar: 00000000 pc: 00000022 cr: f500000052 cv: 120a0085
  (44): ac: 00000000 ar: 00000000 pc: 00000022 cr: 6c00000062 cv: 0a008500
  (45): ac: 00000000 ar: 00000000 pc: 00000022 cr: 6c00000062 cv: 0a008500
  (46): ac: 00000000 ar: 00000000 pc: 00000022 cr: 6c00000062 cv: 0a008500
  (47): ac: 00000000 ar: 00000000 pc: 00000022 cr: 6c00000062 cv: 00850000
  (48): ac: 00000000 ar: 00000000 pc: 00000022 cr: 6c00000062 cv: 00850000
  (49): ac: 00000000 ar: 00000000 pc: 00000022 cr: 6c00000062 cv: 00850000
  (50): ac: 00000000 ar: 00000000 pc: 00000022 cr: 6c00000062 cv: 85000000
  (51): ac: 00000000 ar: 00000000 pc: 00000022 cr: 6c00000062 cv: 85000000
  (52): ac: 00000000 ar: 00000000 pc: 00000022 cr: 6c00000062 cv: 85000000
  (53): ac: 00000000 ar: 00000000 pc: 00000022 cr: 6c00000062 cv: 00000000
  (54): ac: 00000000 ar: 00000000 pc: 00000022 cr: 6c00000062 cv: 00000000
  (55): ac: 00000000 ar: 00000062 pc: 00000027 cr: 6c00000062 cv: 00000000
  (56): ac: 00000000 ar: 00000062 pc: 00000027 cr: 6c00000062 cv: 00000000
  (57): ac: 00000000 ar: 00000052 pc: 00000027 cr: 6c00000062 cv: 00000000
  (58): ac: 00000000 ar: 00000052 pc: 00000027 cr: 6c00000062 cv: 00000000
  (59): ac: 00000001 ar: 00000052 pc: 00000027 cr: 6c00000062 cv: 00000000
  (60): ac: 00000001 ar: 00000052 pc: 00000027 cr: 6c00000062 cv: 00000000
  (61): ac: 00000001 ar: 00000052 pc: 0000002c cr: 4200000001 cv: 00000000
  (62): ac: 00000000 ar: 00000052 pc: 0000002c cr: 4200000001 cv: 00000000
  (63): ac: 00000000 ar: 00000052 pc: 0000002c cr: 4200000001 cv: 00000000
  (64): ac: 00000000 ar: 00000052 pc: 0000002f cr: 81000b6000 cv: 00000000
  (65): ac: 00000000 ar: 00000052 pc: 0000002f cr: 81000b6000 cv: 00000000
  (66): ac: 00000000 ar: 00000052 pc: 0000002f cr: 81000b6000 cv: 00000000
  (67): ac: 00000000 ar: 0000006e pc: 00000034 cr: 600000006e cv: 00000000
  (68): ac: 00000000 ar: 0000006e pc: 00000034 cr: 600000006e cv: 00000000
  (69): ac: 00000000 ar: 0000006e pc: 00000034 cr: 600000006e cv: 00000000
  (70): ac: 00000000 ar: 0000006e pc: 00000034 cr: 600000006e cv: 00000000
  (71): ac: 00000000 ar: 0000006e pc: 00000035 cr: 016b000000 cv: 00000000
  (72): ac: 00000001 ar: 0000006e pc: 00000035 cr: 016b000000 cv: 00000000
  (73): ac: 00000001 ar: 0000006e pc: 00000035 cr: 016b000000 cv: 00000000
  (74): ac: 00000001 ar: 0000006e pc: 0000003a cr: 6b0000006e cv: 00000000
  (75): ac: 00000001 ar: 0000006e pc: 0000003a cr: 6b0000006e cv: 00000000
  (76): ac: 00000001 ar: 0000006e pc: 0000003a cr: 6b0000006e cv: 00000000
  (77): ac: 00000001 ar: 00000062 pc: 0000003f cr: 6000000062 cv: 00000000
  (78): ac: 00000001 ar: 00000062 pc: 0000003f cr: 6000000062 cv: 00000000
  (79): ac: 00000052 ar: 00000062 pc: 0000003f cr: 6000000062 cv: 00000000
  (80): ac: 00000052 ar: 00000062 pc: 0000003f cr: 6000000062 cv: 00000000
  (81): ac: 00000052 ar: 00000062 pc: 00000040 cr: 036b000000 cv: 00000000
  (82): ac: 00000056 ar: 00000062 pc: 00000040 cr: 036b000000 cv: 00000000
  (83): ac: 00000056 ar: 00000062 pc: 00000040 cr: 036b000000 cv: 00000000
  (84): ac: 00000056 ar: 00000062 pc: 00000045 cr: 6b00000062 cv: 00000000
  (85): ac: 00000056 ar: 00000062 pc: 00000045 cr: 6b00000062 cv: 00000000
  (86): ac: 00000056 ar: 00000062 pc: 00000045 cr: 6b00000062 cv: 00000000
  (87): ac: 00000056 ar: 00000062 pc: 0000004a cr: 6c00000062 cv: 00000000
  (88): ac: 00000056 ar: 00000062 pc: 0000004a cr: 6c00000062 cv: 00000000
  (89): ac: 00000056 ar: 00000056 pc: 0000004a cr: 6c00000062 cv: 00000000
  (90): ac: 00000056 ar: 00000056 pc: 0000004a cr: 6c00000062 cv: 00000000
  (91): ac: 00000001 ar: 00000056 pc: 0000004a cr: 6c00000062 cv: 00000000
  (92): ac: 00000001 ar: 00000056 pc: 0000004a cr: 6c00000062 cv: 00000000
  (93): ac: 00000001 ar: 00000056 pc: 0000004f cr: 4200000001 cv: 00000000
  (94): ac: 00000000 ar: 00000056 pc: 0000004f cr: 4200000001 cv: 00000000
  (95): ac: 00000000 ar: 00000056 pc: 0000004f cr: 4200000001 cv: 00000000
  (96): ac: 00000000 ar: 00000056 pc: 00000052 cr: 81000b6000 cv: 00000000
  (97): ac: 00000000 ar: 00000056 pc: 00000052 cr: 81000b6000 cv: 00000000
  (98): ac: 00000000 ar: 00000056 pc: 00000052 cr: 81000b6000 cv: 00000000
  (99): ac: 00000000 ar: 0000006e pc: 00000057 cr: 600000006e cv: 00000000
  (100): ac: 00000000 ar: 0000006e pc: 00000057 cr: 600000006e cv: 00000000
  (101): ac: 00000001 ar: 0000006e pc: 00000057 cr: 600000006e cv: 00000000
  (102): ac: 00000001 ar: 0000006e pc: 00000057 cr: 600000006e cv: 00000000
  (103): ac: 00000001 ar: 0000006e pc: 00000058 cr: 016b000000 cv: 00000000
  (104): ac: 00000002 ar: 0000006e pc: 00000058 cr: 016b000000 cv: 00000000
  (105): ac: 00000002 ar: 0000006e pc: 00000058 cr: 016b000000 cv: 00000000
  (106): ac: 00000002 ar: 0000006e pc: 0000005d cr: 6b0000006e cv: 00000000
  (107): ac: 00000002 ar: 0000006e pc: 0000005d cr: 6b0000006e cv: 00000000
  (108): ac: 00000002 ar: 0000006e pc: 0000005d cr: 6b0000006e cv: 00000000
  (109): ac: 00000002 ar: 00000062 pc: 00000062 cr: 6000000062 cv: 00000000
  (110): ac: 00000002 ar: 00000062 pc: 00000062 cr: 6000000062 cv: 00000000
  (111): ac: 00000056 ar: 00000062 pc: 00000062 cr: 6000000062 cv: 00000000
  (112): ac: 00000056 ar: 00000062 pc: 00000062 cr: 6000000062 cv: 00000000
  (113): ac: 00000056 ar: 00000062 pc: 00000063 cr: 036b000000 cv: 00000000
  (114): ac: 0000005a ar: 00000062 pc: 00000063 cr: 036b000000 cv: 00000000
  (115): ac: 0000005a ar: 00000062 pc: 00000063 cr: 036b000000 cv: 00000000
  (116): ac: 0000005a ar: 00000062 pc: 00000068 cr: 6b00000062 cv: 00000000
  (117): ac: 0000005a ar: 00000062 pc: 00000068 cr: 6b00000062 cv: 00000000
  (118): ac: 0000005a ar: 00000062 pc: 00000068 cr: 6b00000062 cv: 00000000
  (119): ac: 0000005a ar: 00000062 pc: 0000006d cr: 6c00000062 cv: 00000000
  (120): ac: 0000005a ar: 00000062 pc: 0000006d cr: 6c00000062 cv: 00000000
  (121): ac: 0000005a ar: 0000005a pc: 0000006d cr: 6c00000062 cv: 00000000
  (122): ac: 0000005a ar: 0000005a pc: 0000006d cr: 6c00000062 cv: 00000000
  (123): ac: 00000002 ar: 0000005a pc: 0000006d cr: 6c00000062 cv: 00000000
  (124): ac: 00000002 ar: 0000005a pc: 0000006d cr: 6c00000062 cv: 00000000
  (125): ac: 00000002 ar: 0000005a pc: 00000072 cr: 4200000001 cv: 00000000
  (126): ac: 00000001 ar: 0000005a pc: 00000072 cr: 4200000001 cv: 00000000
  (127): ac: 00000001 ar: 0000005a pc: 00000072 cr: 4200000001 cv: 00000000
  (128): ac: 00000001 ar: 0000005a pc: 00000075 cr: 81000b6000 cv: 00000000
  (129): ac: 00000001 ar: 0000005a pc: 00000080 cr: 81000b6000 cv: 00000000
  (130): ac: 00000001 ar: 0000005a pc: 00000080 cr: 81000b6000 cv: 00000000
  (131): ac: 00000001 ar: 00000062 pc: 00000085 cr: 6000000062 cv: 00000000
  (132): ac: 00000001 ar: 00000062 pc: 00000085 cr: 6000000062 cv: 00000000
  (133): ac: 0000005a ar: 00000062 pc: 00000085 cr: 6000000062 cv: 00000000
  (134): ac: 0000005a ar: 00000062 pc: 00000085 cr: 6000000062 cv: 00000000
  (135): ac: 0000005a ar: 00000062 pc: 00000086 cr: 036b000000 cv: 00000000
  (136): ac: 0000005e ar: 00000062 pc: 00000086 cr: 036b000000 cv: 00000000
  (137): ac: 0000005e ar: 00000062 pc: 00000086 cr: 036b000000 cv: 00000000
  (138): ac: 0000005e ar: 00000062 pc: 0000008b cr: 6b00000062 cv: 00000000
  (139): ac: 0000005e ar: 00000062 pc: 0000008b cr: 6b00000062 cv: 00000000
  (140): ac: 0000005e ar: 00000062 pc: 0000008b cr: 6b00000062 cv: 00000000
  (141): ac: 0000005e ar: 00000062 pc: 00000090 cr: 6c00000062 cv: 00000000
  (142): ac: 0000005e ar: 00000062 pc: 00000090 cr: 6c00000062 cv: 00000000
  (143): ac: 0000005e ar: 0000005e pc: 00000090 cr: 6c00000062 cv: 00000000
  (144): ac: 0000005e ar: 0000005e pc: 00000090 cr: 6c00000062 cv: 00000000
  (145): ac: 00000002 ar: 0000005e pc: 00000090 cr: 6c00000062 cv: 00000000
  (146): ac: 00000002 ar: 0000005e pc: 00000090 cr: 6c00000062 cv: 00000000
  (147): ac: 00000002 ar: 0000005e pc: 00000095 cr: 4200000001 cv: 00000000
  (148): ac: 00000001 ar: 0000005e pc: 00000095 cr: 4200000001 cv: 00000000
  (149): ac: 00000001 ar: 0000005e pc: 00000095 cr: 4200000001 cv: 00000000
  (150): ac: 00000001 ar: 0000005e pc: 00000098 cr: 81000b6000 cv: 00000000
  (151): ac: 00000001 ar: 0000005e pc: 000000a3 cr: 81000b6000 cv: 00000000
  (152): ac: 00000001 ar: 0000005e pc: 000000a3 cr: 81000b6000 cv: 00000000
  (153): ac: 00000001 ar: 00000062 pc: 000000a8 cr: 6000000062 cv: 00000000
  (154): ac: 00000001 ar: 00000062 pc: 000000a8 cr: 6000000062 cv: 00000000
  (155): ac: 0000005e ar: 00000062 pc: 000000a8 cr: 6000000062 cv: 00000000
  (156): ac: 0000005e ar: 00000062 pc: 000000a8 cr: 6000000062 cv: 00000000
  (157): ac: 0000005e ar: 00000062 pc: 000000a9 cr: 036b000000 cv: 00000000
  (158): ac: 00000062 ar: 00000062 pc: 000000a9 cr: 036b000000 cv: 00000000
  (159): ac: 00000062 ar: 00000062 pc: 000000a9 cr: 036b000000 cv: 00000000
  (160): ac: 00000062 ar: 00000062 pc: 000000ae cr: 6b00000062 cv: 00000000
  (161): ac: 00000062 ar: 00000062 pc: 000000ae cr: 6b00000062 cv: 00000000
  (162): ac: 00000062 ar: 00000062 pc: 000000ae cr: 6b00000062 cv: 00000000
  (163): ac: 00000062 ar: 0000006e pc: 000000b3 cr: 600000006e cv: 00000000
  (164): ac: 00000062 ar: 0000006e pc: 000000b3 cr: 600000006e cv: 00000000
  (165): ac: 00000002 ar: 0000006e pc: 000000b3 cr: 600000006e cv: 00000000
  (166): ac: 00000002 ar: 0000006e pc: 000000b3 cr: 600000006e cv: 00000000
  (167): ac: 00000002 ar: 00000021 pc: 000000b8 cr: 6b00000021 cv: 00000000
  (168): ac: 00000002 ar: 00000021 pc: 000000b8 cr: 6b00000021 cv: 00000000
  (169): ac: 00000002 ar: 00000021 pc: 000000b8 cr: 6b00000021 cv: 00000000
  (170): ac: 00000002 ar: 00000021 pc: 000000b9 cr: 0708000000 cv: 00000000
  (171): ac: 00000002 ar: 00000021 pc: 000000b9 cr: 0708000000 cv: 00000000
  2 
  Assertion passed