code: |
  .section data

  .org 0x22
  arr: .word 500 360 -1 69
  res: .word 0 0 0 0
  pointer: .word res

  .section text

  #define to_st_inc
      ld_ind $2
      st  $1
      ld_a $2
      inc4
      st $2
  #enddefine

  start:
      vld3 arr
      vmv31
      vmv32
      vadd12
      vst3 res
      to_st_inc 0x21 pointer    ; some cool comment
      to_st_inc 0x21 pointer
      to_st_inc 0x21 pointer
      to_st_inc 0x21 pointer
      halt


  .section int
      ret
  

config: |
  {
    "mem_size": 2048,
    "tick_cnt": 500,
    "report": "({tick}): ac: {ac} ar: {ar} pc: {pc} cr: {cr} cv: {cv}",
    "res": "dec",
    "assert": "1000 720 -2 138 "
  }

assert_cmem: |
  10: opcode: f2 arg: 00000022 -- vld3 34
  15: opcode: c1 -- vmv31
  16: opcode: c2 -- vmv32
  17: opcode: d0 -- vadd12
  18: opcode: f5 arg: 00000032 -- vst3 50
  23: opcode: 6c arg: 00000042 -- ld_ind 66
  28: opcode: 6b arg: 00000021 -- st 33
  33: opcode: 60 arg: 00000042 -- ld_a 66
  38: opcode: 03 -- inc4
  39: opcode: 6b arg: 00000042 -- st 66
  44: opcode: 6c arg: 00000042 -- ld_ind 66
  49: opcode: 6b arg: 00000021 -- st 33
  54: opcode: 60 arg: 00000042 -- ld_a 66
  59: opcode: 03 -- inc4
  60: opcode: 6b arg: 00000042 -- st 66
  65: opcode: 6c arg: 00000042 -- ld_ind 66
  70: opcode: 6b arg: 00000021 -- st 33
  75: opcode: 60 arg: 00000042 -- ld_a 66
  80: opcode: 03 -- inc4
  81: opcode: 6b arg: 00000042 -- st 66
  86: opcode: 6c arg: 00000042 -- ld_ind 66
  91: opcode: 6b arg: 00000021 -- st 33
  96: opcode: 60 arg: 00000042 -- ld_a 66
  101: opcode: 03 -- inc4
  102: opcode: 6b arg: 00000042 -- st 66
  107: opcode: 07 -- halt
  108: opcode: 08 -- ret



assert_mem: |
  34: data: 000001f4
  38: data: 00000168
  42: data: ffffffff
  46: data: 00000045
  50: data: 00000000
  54: data: 00000000
  58: data: 00000000
  62: data: 00000000
  66: data: 00000032


assert_report: |
  (1): ac: 00000000 ar: 00000000 pc: 00000000 cr: 0000000000 cv: 00000000
  (2): ac: 00000000 ar: 00000000 pc: 00000005 cr: 4b0000000a cv: 00000000
  (3): ac: 00000000 ar: 00000000 pc: 0000000a cr: 4b0000000a cv: 00000000
  (4): ac: 00000000 ar: 00000000 pc: 0000000a cr: 4b0000000a cv: 00000000
  (5): ac: 00000000 ar: 00000000 pc: 0000000f cr: f200000022 cv: 00000082
  (6): ac: 00000000 ar: 00000000 pc: 0000000f cr: f200000022 cv: 00000082
  (7): ac: 00000000 ar: 00000000 pc: 0000000f cr: f200000022 cv: 00000082
  (8): ac: 00000000 ar: 00000000 pc: 00000010 cr: c1c2d0f500 cv: 00008201
  (9): ac: 00000000 ar: 00000000 pc: 00000010 cr: c1c2d0f500 cv: 00008201
  (10): ac: 00000000 ar: 00000000 pc: 00000010 cr: c1c2d0f500 cv: 00008201
  (11): ac: 00000000 ar: 00000000 pc: 00000011 cr: c2d0f50000 cv: 00820102
  (12): ac: 00000000 ar: 00000000 pc: 00000011 cr: c2d0f50000 cv: 00820102
  (13): ac: 00000000 ar: 00000000 pc: 00000011 cr: c2d0f50000 cv: 00820102
  (14): ac: 00000000 ar: 00000000 pc: 00000012 cr: d0f5000000 cv: 82010210
  (15): ac: 00000000 ar: 00000000 pc: 00000012 cr: d0f5000000 cv: 82010210
  (16): ac: 00000000 ar: 00000000 pc: 00000012 cr: d0f5000000 cv: 82010210
  (17): ac: 00000000 ar: 00000000 pc: 00000017 cr: f500000032 cv: 01021085
  (18): ac: 00000000 ar: 00000000 pc: 00000017 cr: f500000032 cv: 01021085
  (19): ac: 00000000 ar: 00000000 pc: 00000017 cr: f500000032 cv: 01021085
  (20): ac: 00000000 ar: 00000000 pc: 00000017 cr: 6c00000042 cv: 02108500
  (21): ac: 00000000 ar: 00000000 pc: 00000017 cr: 6c00000042 cv: 02108500
  (22): ac: 00000000 ar: 00000000 pc: 00000017 cr: 6c00000042 cv: 02108500
  (23): ac: 00000000 ar: 00000000 pc: 00000017 cr: 6c00000042 cv: 10850000
  (24): ac: 00000000 ar: 00000000 pc: 00000017 cr: 6c00000042 cv: 10850000
  (25): ac: 00000000 ar: 00000000 pc: 00000017 cr: 6c00000042 cv: 10850000
  (26): ac: 00000000 ar: 00000000 pc: 00000017 cr: 6c00000042 cv: 85000000
  (27): ac: 00000000 ar: 00000000 pc: 00000017 cr: 6c00000042 cv: 85000000
  (28): ac: 00000000 ar: 00000000 pc: 00000017 cr: 6c00000042 cv: 85000000
  (29): ac: 00000000 ar: 00000000 pc: 00000017 cr: 6c00000042 cv: 00000000
  (30): ac: 00000000 ar: 00000000 pc: 00000017 cr: 6c00000042 cv: 00000000
  (31): ac: 00000000 ar: 00000042 pc: 0000001c cr: 6c00000042 cv: 00000000
  (32): ac: 00000000 ar: 00000042 pc: 0000001c cr: 6c00000042 cv: 00000000
  (33): ac: 00000000 ar: 00000032 pc: 0000001c cr: 6c00000042 cv: 00000000
  (34): ac: 00000000 ar: 00000032 pc: 0000001c cr: 6c00000042 cv: 00000000
  (35): ac: 000003e8 ar: 00000032 pc: 0000001c cr: 6c00000042 cv: 00000000
  (36): ac: 000003e8 ar: 00000032 pc: 0000001c cr: 6c00000042 cv: 00000000
  (37): ac: 000003e8 ar: 00000021 pc: 00000021 cr: 6b00000021 cv: 00000000
  (38): ac: 000003e8 ar: 00000021 pc: 00000021 cr: 6b00000021 cv: 00000000
  (39): ac: 000003e8 ar: 00000021 pc: 00000021 cr: 6b00000021 cv: 00000000
  (40): ac: 000003e8 ar: 00000042 pc: 00000026 cr: 6000000042 cv: 00000000
  (41): ac: 000003e8 ar: 00000042 pc: 00000026 cr: 6000000042 cv: 00000000
  (42): ac: 00000032 ar: 00000042 pc: 00000026 cr: 6000000042 cv: 00000000
  (43): ac: 00000032 ar: 00000042 pc: 00000026 cr: 6000000042 cv: 00000000
  (44): ac: 00000032 ar: 00000042 pc: 00000027 cr: 036b000000 cv: 00000000
  (45): ac: 00000036 ar: 00000042 pc: 00000027 cr: 036b000000 cv: 00000000
  (46): ac: 00000036 ar: 00000042 pc: 00000027 cr: 036b000000 cv: 00000000
  (47): ac: 00000036 ar: 00000042 pc: 0000002c cr: 6b00000042 cv: 00000000
  (48): ac: 00000036 ar: 00000042 pc: 0000002c cr: 6b00000042 cv: 00000000
  (49): ac: 00000036 ar: 00000042 pc: 0000002c cr: 6b00000042 cv: 00000000
  (50): ac: 00000036 ar: 00000042 pc: 00000031 cr: 6c00000042 cv: 00000000
  (51): ac: 00000036 ar: 00000042 pc: 00000031 cr: 6c00000042 cv: 00000000
  (52): ac: 00000036 ar: 00000036 pc: 00000031 cr: 6c00000042 cv: 00000000
  (53): ac: 00000036 ar: 00000036 pc: 00000031 cr: 6c00000042 cv: 00000000
  (54): ac: 000002d0 ar: 00000036 pc: 00000031 cr: 6c00000042 cv: 00000000
  (55): ac: 000002d0 ar: 00000036 pc: 00000031 cr: 6c00000042 cv: 00000000
  (56): ac: 000002d0 ar: 00000021 pc: 00000036 cr: 6b00000021 cv: 00000000
  (57): ac: 000002d0 ar: 00000021 pc: 00000036 cr: 6b00000021 cv: 00000000
  (58): ac: 000002d0 ar: 00000021 pc: 00000036 cr: 6b00000021 cv: 00000000
  (59): ac: 000002d0 ar: 00000042 pc: 0000003b cr: 6000000042 cv: 00000000
  (60): ac: 000002d0 ar: 00000042 pc: 0000003b cr: 6000000042 cv: 00000000
  (61): ac: 00000036 ar: 00000042 pc: 0000003b cr: 6000000042 cv: 00000000
  (62): ac: 00000036 ar: 00000042 pc: 0000003b cr: 6000000042 cv: 00000000
  (63): ac: 00000036 ar: 00000042 pc: 0000003c cr: 036b000000 cv: 00000000
  (64): ac: 0000003a ar: 00000042 pc: 0000003c cr: 036b000000 cv: 00000000
  (65): ac: 0000003a ar: 00000042 pc: 0000003c cr: 036b000000 cv: 00000000
  (66): ac: 0000003a ar: 00000042 pc: 00000041 cr: 6b00000042 cv: 00000000
  (67): ac: 0000003a ar: 00000042 pc: 00000041 cr: 6b00000042 cv: 00000000
  (68): ac: 0000003a ar: 00000042 pc: 00000041 cr: 6b00000042 cv: 00000000
  (69): ac: 0000003a ar: 00000042 pc: 00000046 cr: 6c00000042 cv: 00000000
  (70): ac: 0000003a ar: 00000042 pc: 00000046 cr: 6c00000042 cv: 00000000
  (71): ac: 0000003a ar: 0000003a pc: 00000046 cr: 6c00000042 cv: 00000000
  (72): ac: 0000003a ar: 0000003a pc: 00000046 cr: 6c00000042 cv: 00000000
  (73): ac: fffffffe ar: 0000003a pc: 00000046 cr: 6c00000042 cv: 00000000
  (74): ac: fffffffe ar: 0000003a pc: 00000046 cr: 6c00000042 cv: 00000000
  (75): ac: fffffffe ar: 00000021 pc: 0000004b cr: 6b00000021 cv: 00000000
  (76): ac: fffffffe ar: 00000021 pc: 0000004b cr: 6b00000021 cv: 00000000
  (77): ac: fffffffe ar: 00000021 pc: 0000004b cr: 6b00000021 cv: 00000000
  (78): ac: fffffffe ar: 00000042 pc: 00000050 cr: 6000000042 cv: 00000000
  (79): ac: fffffffe ar: 00000042 pc: 00000050 cr: 6000000042 cv: 00000000
  (80): ac: 0000003a ar: 00000042 pc: 00000050 cr: 6000000042 cv: 00000000
  (81): ac: 0000003a ar: 00000042 pc: 00000050 cr: 6000000042 cv: 00000000
  (82): ac: 0000003a ar: 00000042 pc: 00000051 cr: 036b000000 cv: 00000000
  (83): ac: 0000003e ar: 00000042 pc: 00000051 cr: 036b000000 cv: 00000000
  (84): ac: 0000003e ar: 00000042 pc: 00000051 cr: 036b000000 cv: 00000000
  (85): ac: 0000003e ar: 00000042 pc: 00000056 cr: 6b00000042 cv: 00000000
  (86): ac: 0000003e ar: 00000042 pc: 00000056 cr: 6b00000042 cv: 00000000
  (87): ac: 0000003e ar: 00000042 pc: 00000056 cr: 6b00000042 cv: 00000000
  (88): ac: 0000003e ar: 00000042 pc: 0000005b cr: 6c00000042 cv: 00000000
  (89): ac: 0000003e ar: 00000042 pc: 0000005b cr: 6c00000042 cv: 00000000
  (90): ac: 0000003e ar: 0000003e pc: 0000005b cr: 6c00000042 cv: 00000000
  (91): ac: 0000003e ar: 0000003e pc: 0000005b cr: 6c00000042 cv: 00000000
  (92): ac: 0000008a ar: 0000003e pc: 0000005b cr: 6c00000042 cv: 00000000
  (93): ac: 0000008a ar: 0000003e pc: 0000005b cr: 6c00000042 cv: 00000000
  (94): ac: 0000008a ar: 00000021 pc: 00000060 cr: 6b00000021 cv: 00000000
  (95): ac: 0000008a ar: 00000021 pc: 00000060 cr: 6b00000021 cv: 00000000
  (96): ac: 0000008a ar: 00000021 pc: 00000060 cr: 6b00000021 cv: 00000000
  (97): ac: 0000008a ar: 00000042 pc: 00000065 cr: 6000000042 cv: 00000000
  (98): ac: 0000008a ar: 00000042 pc: 00000065 cr: 6000000042 cv: 00000000
  (99): ac: 0000003e ar: 00000042 pc: 00000065 cr: 6000000042 cv: 00000000
  (100): ac: 0000003e ar: 00000042 pc: 00000065 cr: 6000000042 cv: 00000000
  (101): ac: 0000003e ar: 00000042 pc: 00000066 cr: 036b000000 cv: 00000000
  (102): ac: 00000042 ar: 00000042 pc: 00000066 cr: 036b000000 cv: 00000000
  (103): ac: 00000042 ar: 00000042 pc: 00000066 cr: 036b000000 cv: 00000000
  (104): ac: 00000042 ar: 00000042 pc: 0000006b cr: 6b00000042 cv: 00000000
  (105): ac: 00000042 ar: 00000042 pc: 0000006b cr: 6b00000042 cv: 00000000
  (106): ac: 00000042 ar: 00000042 pc: 0000006b cr: 6b00000042 cv: 00000000
  (107): ac: 00000042 ar: 00000042 pc: 0000006c cr: 0708000000 cv: 00000000
  (108): ac: 00000042 ar: 00000042 pc: 0000006c cr: 0708000000 cv: 00000000
  1000 720 -2 138 
  Assertion passed